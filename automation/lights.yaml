#####################
#
# Porch lights on at sunset
#
#####################
- alias: Turn on the porch lights when the sun sets
  trigger:
  - event: sunset
    platform: sun
    offset: "-00:20:00"
  condition:
  - condition: state
    entity_id: light.front_porch_overhead_light
    state: 'off'
  action:
  - entity_id: light.front_porch_overhead_light
    service: light.turn_on


#####################
#
# Porch lights off at 11pm
#
#####################
- alias: Turn off the porch lights at 11pm
  trigger:
    platform: time
    hours: 23
    minutes: 00
    seconds: 00
  condition:
  - condition: state
    entity_id: light.living_room_main_lights
    state: 'off'
  action:
  - entity_id: light.front_porch_overhead_light
    service: light.turn_off


#####################
#
# Turn on porch lights when someone is near
#
#####################
- alias: Turn on porch lights when someone is on the porch
  trigger:
  - entity_id: binary_sensor.front_door_camera__porch_activity
    from: 'off'
    platform: state
    to: 'on'
  - entity_id: binary_sensor.front_door_camera_person_detected
    from: 'off'
    platform: state
    to: 'on'
  condition:
  - condition: state
    entity_id: sun.sun
    state: below_horizon
  action:
  - data:
      brightness_pct: 100
    entity_id:
    - light.front_porch
    service: light.turn_on


#####################
#
# Turn on garage light if motion is detected
#
#####################
#- alias: Turn on the garage light when motion is detected
  #trigger:
    #platform: state
    #entity_id: sensor.hue_motion_sensor_motion_01
    #from: 'off'
    #to: 'on'
  #condition:
    #condition: sun
    #after: sunset
    #after_offset: "-01:00:00"
  #action:
  #- data:
      #brightness_pct: 100
    #entity_id: light.garage_main_lights
    #service: light.turn_on


#####################
#
# Turn off garage light after motion stops
#
#####################
#- alias: Turn off garage light 10 minutes after last movement
  #trigger:
    #platform: state
    #entity_id: sensor.hue_motion_sensor_motion_01
    #from: 'on'
    #to: 'off'
    #for:
      #minutes: 10
  #action:
    #service: light.turn_off
    #entity_id: light.garage_main_lights
